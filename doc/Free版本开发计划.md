# NebulaDL Free 版本开发计划

目标：先把 Free 版本做成“创作者愿意日常用、普通用户一看就会用”的稳定桌面下载工具（本地运行、无需账号、无付费墙）。

## 里程碑定义

- M0：可用（能解析、能下、能看进度、失败可解释）
- M1：好用（队列/历史/重试/暂停继续可靠，设置可控）
- M2：耐用（站点变化可跟进：更新机制、日志支持、可维护）

## Sprint 0：清理与统一（1-2 天）

- 移除所有付费/Pro UI 与后端门控（已做：界面、API、格式标记、批量/并发限制）。
- 确认 UI 与 API 契约：只保留实际可用的 API 方法。
- 加入最小日志导出入口（至少能复制错误信息/导出文本）。

## Sprint 1：M0 可用闭环（3-5 天）

- 解析
  - 支持单链接解析（标题/封面/时长/站点/可下载格式）。
  - 常见错误信息友好化（需要登录、地域限制、网络错误、被限流）。
- 下载
  - 单任务下载：开始/取消。
  - 进度显示：百分比、速度、ETA。
- 设置
  - 下载目录选择。
  - 代理设置（HTTP）。
  - Cookie 映射：按域名绑定 cookies.txt 并在下载时自动匹配。

验收标准：新用户不看说明也能完成一次下载；失败时能读懂原因。

## Sprint 2：M1 好用（5-7 天）

- 队列与任务管理
  - 队列支持多任务并发（1-16 可调）。
  - 暂停/继续/重试逻辑稳定（包括“未开始就暂停/取消”的边界）。
- 下载历史
  - 记录每个任务：URL、标题、格式、保存路径、状态、时间。
  - 支持搜索与“一键重下”。
- 资源组织
  - Smart Archive：按标题建文件夹、保存封面（可配置）。

验收标准：日常使用 20+ 任务不会丢状态；失败任务可一键重试并成功恢复。

## Sprint 3：M2 耐用（5-7 天）

- 更新机制（关键）
  - 应用内检查 yt-dlp / ffmpeg 版本（至少提示“建议更新”和当前版本）。
  - 一键更新（可选先做“打开下载页 + 指导”，后续再做自动化）。
- 诊断与支持
  - 日志文件：记录解析/下载参数（脱敏）、错误堆栈、yt-dlp 原始输出。
  - 一键复制诊断信息（用于用户反馈）。
- 可靠性
  - 崩溃/重启后的任务状态恢复（至少恢复历史；进阶可恢复未完成队列）。

验收标准：站点规则变化后，用户能通过更新/日志快速定位问题，不会“无从下手”。

## Sprint 4：创作者向增强（可选，按反馈排期）

- 播放列表/频道下载（不做订阅同步也能显著提升创作者价值）。
- 字幕下载（旁路保存 SRT/VTT）与基础元数据保存（描述/封面）。
- 预设（Profiles Lite）：常用输出策略一键切换（如“1080p MP4”“音频 FLAC”）。

## 风险清单（提前规避）

- 站点变更频繁：没有更新通路会导致高退货/差评（优先做更新提示/指导）。
- 登录态复杂：Cookie 过期/不匹配会导致“能解析不能下”，需要强引导与错误分类。
- 并发过高：对普通用户可能造成卡顿/限流；默认并发建议保守（例如 2-4），高级用户自行调高。
